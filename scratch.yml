  - name: creating configurations
    vars:
      old_config:
        configurations: "{{ new_config }}"
      my_new_config:
        configurations:
        - key: k8s.velero.exclude.resources
          type: CONTROLLER_CONFIG
          value: secrets, operators.operator.openshift.io, cloudcredentials.operator.openshift.io, clusteroperators.config.openshift.io, rolebindings,events, events.events.k8s.io,customresourcedefinitions.apiextensions.k8s.io, build.openshift.io, prometheusrules.monitoring.coreos.com
    set_fact:
      new_config: "{{ old_config | default([]) | combine(my_new_config, list_merge='append',recursive=True, ) }}"
  - debug:
      msg: "{{ new_config }}"
      verbosity: 0 
  - name: final list_merge
    vars:
      new_details:
        details:
          k8s: "{{ new_config }}"
    set_fact:
     new_inventorysources: "{{ new_inventorysources | default([]) | combine(new_details, recursive=True, ) }}"

  - debug:
      msg: "{{ new_inventorysources }}"
      verbosity: 0 

  - name: Set K8S Controller Options
    vars:
      data:  "{{ new_inventorysources }}"
      id: "{{ new_inventorysources.id }}"
    include_role:
      name: set_ppdm_inventory      
